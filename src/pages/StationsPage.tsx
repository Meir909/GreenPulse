import { useState } from "react";
import { motion } from "framer-motion";
import Navbar from "@/components/Navbar";
import StationsMapComponent from "@/components/StationsMapComponent";
import StationsMap from "@/components/StationsMap";
import AIAnalysisPanel from "@/components/AIAnalysisPanel";
import ChatbotFloatingButton from "@/components/ChatbotFloatingButton";

interface Station {
  id: number;
  name: string;
  latitude: number;
  longitude: number;
  temperature: number;
  humidity: number;
  co2_ppm: number;
  ph: number;
  light_intensity: number;
  status: "active" | "inactive";
}

const StationsPage = () => {
  const [selectedStation, setSelectedStation] = useState<Station | null>(null);
  const [analysisResult, setAnalysisResult] = useState<string | null>(null);
  const [predictionResult, setPredictionResult] = useState<string | null>(null);
  const [isAnalysisLoading, setIsAnalysisLoading] = useState(false);
  const [isPredictionLoading, setIsPredictionLoading] = useState(false);
  const [activeTab, setActiveTab] = useState<"analysis" | "prediction">(
    "analysis"
  );

  // –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –∑–∞–¥–∞–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞
  const analysisResponses: Record<number, string> = {
    1: `üìä –ê–ù–ê–õ–ò–ó –°–¢–ê–ù–¶–ò–ò GreenPulse Station 01

‚úÖ –°—Ç–∞—Ç—É—Å: –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è

üå°Ô∏è –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 22.5¬∞C (–≤ –Ω–æ—Ä–º–µ)
  ‚Ä¢ –î–∏–∞–ø–∞–∑–æ–Ω: 20-25¬∞C
  ‚Ä¢ –°—Ç–∞—Ç—É—Å: ‚úì –ò–¥–µ–∞–ª—å–Ω–æ

üíß –í–ª–∞–∂–Ω–æ—Å—Ç—å: 65% (–≤ –Ω–æ—Ä–º–µ)
  ‚Ä¢ –î–∏–∞–ø–∞–∑–æ–Ω: 60-80%
  ‚Ä¢ –°—Ç–∞—Ç—É—Å: ‚úì –ò–¥–µ–∞–ª—å–Ω–æ

‚öóÔ∏è pH: 6.8 (–≤ –Ω–æ—Ä–º–µ)
  ‚Ä¢ –î–∏–∞–ø–∞–∑–æ–Ω: 6.5-7.5
  ‚Ä¢ –°—Ç–∞—Ç—É—Å: ‚úì –ò–¥–µ–∞–ª—å–Ω–æ

üå± CO2: 420 ppm (–≤ –Ω–æ—Ä–º–µ)
  ‚Ä¢ –î–∏–∞–ø–∞–∑–æ–Ω: 400-450 ppm
  ‚Ä¢ –°—Ç–∞—Ç—É—Å: ‚úì –ò–¥–µ–∞–ª—å–Ω–æ

‚òÄÔ∏è –°–≤–µ—Ç: 450 –ª—é–∫—Å (–≤ –Ω–æ—Ä–º–µ)
  ‚Ä¢ –î–∏–∞–ø–∞–∑–æ–Ω: 400-600 –ª—é–∫—Å
  ‚Ä¢ –°—Ç–∞—Ç—É—Å: ‚úì –•–æ—Ä–æ—à–æ

üìà –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:
‚Ä¢ –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é
‚Ä¢ –ë–∞–ª–¥—ã—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ –ø–æ–≥–ª–æ—â–∞—é—Ç CO2
‚Ä¢ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏
‚Ä¢ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ø—É—Ç–Ω–∏–∫–æ–≤ GPS –º–æ–∂–µ—Ç –±—ã—Ç—å —É–ª—É—á—à–µ–Ω–æ`,

    2: `üìä –ê–ù–ê–õ–ò–ó –°–¢–ê–ù–¶–ò–ò GreenPulse Station 02

‚úÖ –°—Ç–∞—Ç—É—Å: –•–æ—Ä–æ—à–∏–µ —É—Å–ª–æ–≤–∏—è

üå°Ô∏è –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 23.1¬∞C (–≤ –Ω–æ—Ä–º–µ)
  ‚Ä¢ –î–∏–∞–ø–∞–∑–æ–Ω: 20-25¬∞C
  ‚Ä¢ –°—Ç–∞—Ç—É—Å: ‚úì –ò–¥–µ–∞–ª—å–Ω–æ

üíß –í–ª–∞–∂–Ω–æ—Å—Ç—å: 68.5% (–≤ –Ω–æ—Ä–º–µ)
  ‚Ä¢ –î–∏–∞–ø–∞–∑–æ–Ω: 60-80%
  ‚Ä¢ –°—Ç–∞—Ç—É—Å: ‚úì –ò–¥–µ–∞–ª—å–Ω–æ

‚öóÔ∏è pH: 6.9 (–≤ –Ω–æ—Ä–º–µ)
  ‚Ä¢ –î–∏–∞–ø–∞–∑–æ–Ω: 6.5-7.5
  ‚Ä¢ –°—Ç–∞—Ç—É—Å: ‚úì –û—Ç–ª–∏—á–Ω–æ

üå± CO2: 415 ppm (–≤ –Ω–æ—Ä–º–µ)
  ‚Ä¢ –î–∏–∞–ø–∞–∑–æ–Ω: 400-450 ppm
  ‚Ä¢ –°—Ç–∞—Ç—É—Å: ‚úì –•–æ—Ä–æ—à–æ

‚òÄÔ∏è –°–≤–µ—Ç: 480 –ª—é–∫—Å (–≤—ã—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ)
  ‚Ä¢ –î–∏–∞–ø–∞–∑–æ–Ω: 400-600 –ª—é–∫—Å
  ‚Ä¢ –°—Ç–∞—Ç—É—Å: ‚úì –û—Ç–ª–∏—á–Ω–æ

üìà –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:
‚Ä¢ –ü–æ–≤—ã—à–µ–Ω–Ω–∞—è –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å —Å–≤–µ—Ç–∞ —Å–ø–æ—Å–æ–±—Å—Ç–≤—É–µ—Ç –ª—É—á—à–µ–º—É —Ñ–æ—Ç–æ—Å–∏–Ω—Ç–µ–∑—É
‚Ä¢ –ë–∞–ª–¥—ã—Ä–∏ —Ä–∞—Å—Ç—É—Ç –±—ã—Å—Ç—Ä–µ–µ –æ–±—ã—á–Ω–æ–≥–æ
‚Ä¢ –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ —Ç–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º —É—Ö–æ–¥–∞`,

    3: `üìä –ê–ù–ê–õ–ò–ó –°–¢–ê–ù–¶–ò–ò GreenPulse Station 03

‚ö†Ô∏è –°—Ç–∞—Ç—É—Å: –¢—Ä–µ–±—É–µ—Ç—Å—è –≤–Ω–∏–º–∞–Ω–∏–µ

üå°Ô∏è –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 21.8¬∞C (–≤ –Ω–æ—Ä–º–µ)
  ‚Ä¢ –î–∏–∞–ø–∞–∑–æ–Ω: 20-25¬∞C
  ‚Ä¢ –°—Ç–∞—Ç—É—Å: ‚úì –•–æ—Ä–æ—à–æ

üíß –í–ª–∞–∂–Ω–æ—Å—Ç—å: 62% (–≤ –Ω–æ—Ä–º–µ)
  ‚Ä¢ –î–∏–∞–ø–∞–∑–æ–Ω: 60-80%
  ‚Ä¢ –°—Ç–∞—Ç—É—Å: ‚úì –ú–∏–Ω–∏–º—É–º –Ω–æ—Ä–º—ã

‚öóÔ∏è pH: 6.7 (–≤ –Ω–æ—Ä–º–µ)
  ‚Ä¢ –î–∏–∞–ø–∞–∑–æ–Ω: 6.5-7.5
  ‚Ä¢ –°—Ç–∞—Ç—É—Å: ‚úì –•–æ—Ä–æ—à–æ

üå± CO2: 425 ppm (–≤ –Ω–æ—Ä–º–µ)
  ‚Ä¢ –î–∏–∞–ø–∞–∑–æ–Ω: 400-450 ppm
  ‚Ä¢ –°—Ç–∞—Ç—É—Å: ‚úì –•–æ—Ä–æ—à–æ

‚òÄÔ∏è –°–≤–µ—Ç: 420 –ª—é–∫—Å (–Ω–∏–∂–µ —Å—Ä–µ–¥–Ω–µ–≥–æ)
  ‚Ä¢ –î–∏–∞–ø–∞–∑–æ–Ω: 400-600 –ª—é–∫—Å
  ‚Ä¢ –°—Ç–∞—Ç—É—Å: ‚ö†Ô∏è –ú–∏–Ω–∏–º—É–º –Ω–æ—Ä–º—ã

üìà –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:
‚Ä¢ –£–≤–µ–ª–∏—á—å—Ç–µ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å –æ—Å–≤–µ—â–µ–Ω–∏—è –Ω–∞ 50-100 –ª—é–∫—Å
‚Ä¢ –ü–æ–≤—ã—Å—å—Ç–µ –≤–ª–∞–∂–Ω–æ—Å—Ç—å –¥–æ 70% –¥–ª—è –ª—É—á—à–µ–≥–æ —Ä–æ—Å—Ç–∞
‚Ä¢ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —Å–≤–µ—Ç–∞ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏—è
‚Ä¢ –†–µ–≥—É–ª–∏—Ä—É–π—Ç–µ —É—Å–ª–æ–≤–∏—è –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ`,
  };

  // –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –∑–∞–¥–∞–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≥–Ω–æ–∑–∞
  const predictionResponses: Record<number, string> = {
    1: `üîÆ –ü–†–û–ì–ù–û–ó –ü–û–ì–õ–û–©–ï–ù–ò–Ø CO2 - Station 01

üìä –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
  ‚Ä¢ pH: 6.8 (–∏–¥–µ–∞–ª—å–Ω–æ)
  ‚Ä¢ –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 22.5¬∞C (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ)
  ‚Ä¢ –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å —Å–≤–µ—Ç–∞: 450 –ª—é–∫—Å (—Ö–æ—Ä–æ—à–æ)

üí® –ü–†–ï–î–°–ö–ê–ó–ê–ù–ò–ï –ü–û–ì–õ–û–©–ï–ù–ò–Ø CO2:

  –ó–∞ 1 —á–∞—Å:    4.2 –≥—Ä–∞–º–º–∞ CO2
  –ó–∞ 8 —á–∞—Å–æ–≤:  33.6 –≥—Ä–∞–º–º–∞ CO2
  –ó–∞ 24 —á–∞—Å–∞:  100.8 –≥—Ä–∞–º–º–∞ CO2
  –ó–∞ –Ω–µ–¥–µ–ª—é:   705.6 –≥—Ä–∞–º–º–∞ CO2
  –ó–∞ –º–µ—Å—è—Ü:    3,024 –≥—Ä–∞–º–º–∞ CO2
  –ó–∞ –≥–æ–¥:      36,288 –≥—Ä–∞–º–º–∞ CO2 (36.3 –∫–≥)

üìà –ê–ù–ê–õ–ò–ó –≠–§–§–ï–ö–¢–ò–í–ù–û–°–¢–ò:
  ‚Ä¢ –¢–µ–∫—É—â–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: 92%
  ‚Ä¢ –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≥–ª–æ—â–µ–Ω–∏–µ –±–ª–∏–∑–∫–æ –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É (38 –∫–≥/–≥–æ–¥)
  ‚Ä¢ –£—Å–ª–æ–≤–∏—è –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:
  ‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ —Ç–µ–∫—É—â–∏–µ —É—Å–ª–æ–≤–∏—è
  ‚Ä¢ –ü—Ä–∏ –ø–æ–≤—ã—à–µ–Ω–∏–∏ —Å–≤–µ—Ç–∞ –Ω–∞ 10% —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤–æ–∑—Ä–∞—Å—Ç–µ—Ç –Ω–∞ 3-5%
  ‚Ä¢ –†–µ–≥—É–ª—è—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã –æ–±–µ—Å–ø–µ—á–∏—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å`,

    2: `üîÆ –ü–†–û–ì–ù–û–ó –ü–û–ì–õ–û–©–ï–ù–ò–Ø CO2 - Station 02

üìä –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
  ‚Ä¢ pH: 6.9 (–æ—Ç–ª–∏—á–Ω–æ)
  ‚Ä¢ –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 23.1¬∞C (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ)
  ‚Ä¢ –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å —Å–≤–µ—Ç–∞: 480 –ª—é–∫—Å (–≤—ã—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ)

üí® –ü–†–ï–î–°–ö–ê–ó–ê–ù–ò–ï –ü–û–ì–õ–û–©–ï–ù–ò–Ø CO2:

  –ó–∞ 1 —á–∞—Å:    4.8 –≥—Ä–∞–º–º–∞ CO2
  –ó–∞ 8 —á–∞—Å–æ–≤:  38.4 –≥—Ä–∞–º–º–∞ CO2
  –ó–∞ 24 —á–∞—Å–∞:  115.2 –≥—Ä–∞–º–º–∞ CO2
  –ó–∞ –Ω–µ–¥–µ–ª—é:   806.4 –≥—Ä–∞–º–º–∞ CO2
  –ó–∞ –º–µ—Å—è—Ü:    3,456 –≥—Ä–∞–º–º–∞ CO2
  –ó–∞ –≥–æ–¥:      41,472 –≥—Ä–∞–º–º–∞ CO2 (41.5 –∫–≥)

üìà –ê–ù–ê–õ–ò–ó –≠–§–§–ï–ö–¢–ò–í–ù–û–°–¢–ò:
  ‚Ä¢ –¢–µ–∫—É—â–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: 95% (–≤—ã—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ!)
  ‚Ä¢ –ü–æ–≤—ã—à–µ–Ω–Ω–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ –¥–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ 10% –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  ‚Ä¢ –≠—Ç–æ –ª—É—á—à–∞—è —Å—Ç–∞–Ω—Ü–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ

üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:
  ‚Ä¢ –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —Ç–µ–∫—É—â–∏–µ —É—Å–ª–æ–≤–∏—è
  ‚Ä¢ –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Å–≤–µ—Ç–∞ –¥–ª—è –µ—â–µ –±–æ–ª—å—à–µ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
  ‚Ä¢ –≠—Ç–∞ —Å—Ç–∞–Ω—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–±—Ä–∞–∑—Ü–æ–º –¥–ª—è –¥—Ä—É–≥–∏—Ö`,

    3: `üîÆ –ü–†–û–ì–ù–û–ó –ü–û–ì–õ–û–©–ï–ù–ò–Ø CO2 - Station 03

üìä –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
  ‚Ä¢ pH: 6.7 (—Ö–æ—Ä–æ—à–æ)
  ‚Ä¢ –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 21.8¬∞C (—Ö–æ—Ä–æ—à–æ)
  ‚Ä¢ –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å —Å–≤–µ—Ç–∞: 420 –ª—é–∫—Å (–Ω–∏–∂–µ —Å—Ä–µ–¥–Ω–µ–≥–æ)

üí® –ü–†–ï–î–°–ö–ê–ó–ê–ù–ò–ï –ü–û–ì–õ–û–©–ï–ù–ò–Ø CO2:

  –ó–∞ 1 —á–∞—Å:    3.6 –≥—Ä–∞–º–º–∞ CO2
  –ó–∞ 8 —á–∞—Å–æ–≤:  28.8 –≥—Ä–∞–º–º–∞ CO2
  –ó–∞ 24 —á–∞—Å–∞:  86.4 –≥—Ä–∞–º–º–∞ CO2
  –ó–∞ –Ω–µ–¥–µ–ª—é:   604.8 –≥—Ä–∞–º–º–∞ CO2
  –ó–∞ –º–µ—Å—è—Ü:    2,592 –≥—Ä–∞–º–º–∞ CO2
  –ó–∞ –≥–æ–¥:      31,104 –≥—Ä–∞–º–º–∞ CO2 (31.1 –∫–≥)

üìà –ê–ù–ê–õ–ò–ó –≠–§–§–ï–ö–¢–ò–í–ù–û–°–¢–ò:
  ‚Ä¢ –¢–µ–∫—É—â–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: 82% (–Ω–∏–∂–µ —Å—Ä–µ–¥–Ω–µ–≥–æ)
  ‚Ä¢ –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ —Å–Ω–∏–∂–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ 15-20%
  ‚Ä¢ –ù–∏–∑–∫–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å —Ç–∞–∫–∂–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:
  ‚Ä¢ –°–†–û–ß–ù–û: –£–≤–µ–ª–∏—á—å—Ç–µ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å —Å–≤–µ—Ç–∞ –¥–æ 500-550 –ª—é–∫—Å
  ‚Ä¢ –ü–æ–≤—ã—Å—å—Ç–µ –≤–ª–∞–∂–Ω–æ—Å—Ç—å –¥–æ 70-75%
  ‚Ä¢ –≠—Ç–æ –º–æ–∂–µ—Ç —É–≤–µ–ª–∏—á–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ 10-15%
  ‚Ä¢ –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —á–µ—Ä–µ–∑ 1 –Ω–µ–¥–µ–ª—é`,
  };

  const handleAnalyzeClick = (station: Station) => {
    setSelectedStation(station);
    setActiveTab("analysis");
    setIsAnalysisLoading(true);

    // –ò–º–∏—Ç–∏—Ä—É–µ–º –∑–∞–≥—Ä—É–∑–∫—É –∞–Ω–∞–ª–∏–∑–∞ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
    setTimeout(() => {
      setAnalysisResult(
        analysisResponses[station.id] ||
          "–ê–Ω–∞–ª–∏–∑ –¥–ª—è —ç—Ç–æ–π —Å—Ç–∞–Ω—Ü–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
      );
      setIsAnalysisLoading(false);
    }, 1500);
  };

  const handlePredictClick = (station: Station) => {
    setSelectedStation(station);
    setActiveTab("prediction");
    setIsPredictionLoading(true);

    // –ò–º–∏—Ç–∏—Ä—É–µ–º –∑–∞–≥—Ä—É–∑–∫—É –ø—Ä–æ–≥–Ω–æ–∑–∞ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
    setTimeout(() => {
      setPredictionResult(
        predictionResponses[station.id] ||
          "–ü—Ä–æ–≥–Ω–æ–∑ –¥–ª—è —ç—Ç–æ–π —Å—Ç–∞–Ω—Ü–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
      );
      setIsPredictionLoading(false);
    }, 1500);
  };

  return (
    <div className="relative min-h-screen bg-background overflow-x-hidden">
      {/* –ù–∞–≤–∏–≥–∞—Ü–∏—è */}
      <Navbar />

      {/* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */}
      <main className="relative pt-32 pb-24 px-4">
        {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */}
        <motion.div
          initial={{ opacity: 0, y: 30 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ duration: 0.6 }}
          className="text-center mb-8"
        >
          <p className="text-sm uppercase tracking-widest text-primary mb-3 font-mono-data">
            –°–µ—Ç—å —Å—Ç–∞–Ω—Ü–∏–π
          </p>
          <h1 className="font-headline text-4xl md:text-5xl font-bold text-foreground mb-4">
            GreenPulse <span className="text-gradient">–ö–∞—Ä—Ç–∞ –°—Ç–∞–Ω—Ü–∏–π</span>
          </h1>
          <p className="text-gray-400 max-w-2xl mx-auto">
            –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –≤—Å–µ –≤–∞—à–∏ —Å—Ç–∞–Ω—Ü–∏–∏ –Ω–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –∫–∞—Ä—Ç–µ. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –º–∞—Ä–∫–µ—Ä –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –∞–Ω–∞–ª–∏–∑–∞ –∏ –ø—Ä–æ–≥–Ω–æ–∑–∞.
          </p>
        </motion.div>

        {/* –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞ */}
        <motion.div
          initial={{ opacity: 0, y: 20 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ duration: 0.6, delay: 0.2 }}
          className="container mx-auto max-w-7xl mb-16 h-[600px] md:h-[700px]"
        >
          <StationsMapComponent
            onStationSelect={setSelectedStation}
            onAnalyzeClick={handleAnalyzeClick}
            onPredictClick={handlePredictClick}
          />
        </motion.div>

        {/* –°–µ—Ç–∫–∞ –∫–∞—Ä—Ç —Å—Ç–∞–Ω—Ü–∏–π */}
        <div className="container mx-auto max-w-7xl">
          <motion.div
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.6, delay: 0.3 }}
            className="mb-12"
          >
            <h2 className="text-2xl font-bold text-foreground mb-6 flex items-center gap-2">
              üìä –°—Ç–∞–Ω—Ü–∏–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –∫–∞—Ä—Ç–æ—á–µ–∫
            </h2>
            <StationsMap
              onAnalyzeClick={handleAnalyzeClick}
              onPredictClick={handlePredictClick}
            />
          </motion.div>

          {/* –í–∫–ª–∞–¥–∫–∏ –∞–Ω–∞–ª–∏–∑–∞ –∏ –ø—Ä–æ–≥–Ω–æ–∑–∞ */}
          {selectedStation && (
            <motion.div
              initial={{ opacity: 0, y: 20 }}
              animate={{ opacity: 1, y: 0 }}
              transition={{ duration: 0.6, delay: 0.4 }}
              className="space-y-6"
            >
              {/* –ö–Ω–æ–ø–∫–∏ –≤–∫–ª–∞–¥–æ–∫ */}
              <div className="flex gap-3">
                <button
                  onClick={() => setActiveTab("analysis")}
                  className={`px-6 py-2 rounded-lg font-medium transition-all duration-300 ${
                    activeTab === "analysis"
                      ? "bg-cyan-600 text-white border border-cyan-400"
                      : "bg-white/5 text-gray-400 border border-cyan-500/20 hover:border-cyan-500/50"
                  }`}
                >
                  üìä –ê–Ω–∞–ª–∏–∑
                </button>
                <button
                  onClick={() => setActiveTab("prediction")}
                  className={`px-6 py-2 rounded-lg font-medium transition-all duration-300 ${
                    activeTab === "prediction"
                      ? "bg-green-600 text-white border border-green-400"
                      : "bg-white/5 text-gray-400 border border-cyan-500/20 hover:border-cyan-500/50"
                  }`}
                >
                  üîÆ –ü—Ä–æ–≥–Ω–æ–∑
                </button>
              </div>

              {/* –ü–∞–Ω–µ–ª–∏ –∞–Ω–∞–ª–∏–∑–∞ –∏ –ø—Ä–æ–≥–Ω–æ–∑–∞ */}
              {activeTab === "analysis" && (
                <AIAnalysisPanel
                  station={selectedStation}
                  type="analysis"
                  isLoading={isAnalysisLoading}
                  result={analysisResult}
                />
              )}

              {activeTab === "prediction" && (
                <AIAnalysisPanel
                  station={selectedStation}
                  type="prediction"
                  isLoading={isPredictionLoading}
                  result={predictionResult}
                />
              )}
            </motion.div>
          )}
        </div>
      </main>

      {/* –ü–ª–∞–≤–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞ —á–∞—Ç–±–æ—Ç–∞ */}
      <ChatbotFloatingButton />
    </div>
  );
};

export default StationsPage;
